<%- include('../partials/header') %>

    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: center; margin: 2rem 0;">
            <h2>
                <%= typeof searchQuery !=='undefined' && searchQuery ? `Search Results for "${searchQuery}" `
                    : 'All Jobs' %>
            </h2>
            <% if (user) { %>
                <a href="/jobs/new" class="btn btn-primary">Post New Job</a>
                <% } %>
        </div>

        <% if (jobs.length===0) { %>
            <div class="alert alert-danger" style="text-align: center;">No jobs found.</div>
            <% } else { %>
                <div style="display: grid; gap: 1.5rem; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));">
                    <% jobs.forEach(job=> { %>
                        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column;">
                            <span
                                style="font-size: 0.8rem; color: var(--text-light); text-transform: uppercase; font-weight: 600;">
                                <%= job.companyName %>
                            </span>
                            <h3 style="margin: 0.5rem 0; color: var(--primary-color);">
                                <%= job.designation %>
                            </h3>
                            <div style="margin-bottom: 1rem; color: var(--secondary-color);">
                                <i class="fas fa-map-marker-alt"></i>
                                <%= job.location %> â€¢
                                    <i class="fas fa-money-bill-wave"></i>
                                    <%= job.salary %>
                            </div>
                            <div
                                style="margin-top: auto; display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 0.85rem; color: var(--text-light);">Posted: <%= job.postedDate
                                        %></span>
                                <a href="/jobs/<%= job.id %>" class="btn btn-outline">View Details</a>
                            </div>
                        </div>
                        <% }) %>
                </div>
                <% } %>
    </div>

    <%- include('../partials/footer') %>